{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-0e63\"],{G8zN:function(t,e,n){},hG3C:function(t,e,n){\"use strict\";n.r(e);var r=n(\"tOpQ\"),a=n(\"t3Un\");var o={data:function(){return{form:{deptName:\"\",parentNo:\"\"},filterText:\"\",organizationList:[],defaultProps:{children:\"children\",label:\"deptName\"},isShowAddForm:!1}},created:function(){this.initView()},methods:{initView:function(){var t=this;Object(r.m)().then(function(e){200==e.data.code?t.organizationList=t.tree(e.data.data,0):t.$message.error(e.data.code)})},append:function(t){var e=this;this.$prompt(\"请输入部门名称\",\"添加部门\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\"}).then(function(n){var r=n.value;e.form.parentNo=t.deptNo,e.form.deptName=r,function(t){return Object(a.a)({url:\"/department\",method:\"post\",data:t})}(e.form).then(function(n){if(200==n.data.code){e.$message({type:\"success\",message:n.data.msg});var r={deptNo:n.data.data,deptName:e.form.deptName,parentNo:e.form.parentNo,children:[]};t.children||e.$set(t,\"children\",[]),t.children.push(r),e.isShowAddForm=!1}else e.$message.error(n.data.msg)}).catch(function(t){e.$message.error(t)})}).catch(function(){e.$message({type:\"info\",message:\"取消添加\"})})},remove:function(t,e){var n=this;this.$confirm(\"此操作将永久删除该部门及所有下属部门, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){(function(t){return Object(a.a)({url:\"/department/\"+t,method:\"delete\"})})(e.deptNo).then(function(t){200==t.data.code?(n.$message({type:\"success\",message:t.data.msg}),n.initView()):n.$message.error(t.data.msg)}).catch(function(t){n.$message.error(t)})}).catch(function(){n.$message({type:\"info\",message:\"已取消删除\"})})},tree:function(t){var e={};t.forEach(function(t,n){e[t.deptNo]=t});var n=[];return t.forEach(function(t){var r=e[t.parentNo];r?(r.children||(r.children=[])).push(t):n.push(t)}),n},filterNode:function(t,e){return console.log(t,e),!t||-1!==e.deptName.indexOf(t)}},watch:{filterText:function(t){this.$refs.tree2.filter(t)}}},u=(n(\"ud4a\"),n(\"KHd+\")),i=Object(u.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"department-list\"},[n(\"div\",{staticClass:\"title\"},[t._v(\"部门管理\")]),t._v(\" \"),n(\"div\",{staticClass:\"controller-bar\"}),t._v(\" \"),n(\"div\",{staticClass:\"main\"},[n(\"el-tree\",{ref:\"tree2\",staticClass:\"filter-tree\",attrs:{data:t.organizationList,props:t.defaultProps,\"default-expand-all\":\"\",\"filter-node-method\":t.filterNode,\"expand-on-click-node\":!1},scopedSlots:t._u([{key:\"default\",fn:function(e){var r=e.node,a=e.data;return n(\"div\",{staticClass:\"custom-tree-node\"},[n(\"span\",{staticClass:\"label\"},[t._v(t._s(r.label))]),t._v(\" \"),n(\"span\",{staticClass:\"btns\"},[n(\"el-button\",{attrs:{type:\"primary\",size:\"mini\"},on:{click:function(){return t.append(a)}}},[t._v(\"\\n                    添加\\n                \")]),t._v(\" \"),n(\"el-button\",{attrs:{type:\"danger\",size:\"mini\"},on:{click:function(){return t.remove(r,a)}}},[t._v(\"\\n                    删除\\n                \")])],1)])}}])})],1)])},[],!1,null,null,null);i.options.__file=\"departmentMng.vue\";e.default=i.exports},tOpQ:function(t,e,n){\"use strict\";n.d(e,\"l\",function(){return a}),n.d(e,\"s\",function(){return o}),n.d(e,\"h\",function(){return u}),n.d(e,\"b\",function(){return i}),n.d(e,\"r\",function(){return c}),n.d(e,\"f\",function(){return s}),n.d(e,\"c\",function(){return f}),n.d(e,\"p\",function(){return d}),n.d(e,\"m\",function(){return l}),n.d(e,\"n\",function(){return p}),n.d(e,\"o\",function(){return m}),n.d(e,\"q\",function(){return h}),n.d(e,\"u\",function(){return b}),n.d(e,\"a\",function(){return g}),n.d(e,\"t\",function(){return v}),n.d(e,\"i\",function(){return O}),n.d(e,\"e\",function(){return N}),n.d(e,\"w\",function(){return w}),n.d(e,\"k\",function(){return $}),n.d(e,\"d\",function(){return k}),n.d(e,\"v\",function(){return x}),n.d(e,\"j\",function(){return y}),n.d(e,\"g\",function(){return C});var r=n(\"t3Un\");function a(t){return Object(r.a)({url:\"/staffs\",method:\"get\",params:t})}function o(t){return Object(r.a)({url:\"/staff/initialInfo\",method:\"get\",params:t})}function u(t){return Object(r.a)({url:\"/staff/initialInfo\",method:\"post\",data:t})}function i(t){return Object(r.a)({url:\"/staff/generalInfo\",method:\"patch\",data:t})}function c(){return Object(r.a)({url:\"/staffInfoItem\",method:\"get\"})}function s(t){return Object(r.a)({url:\"/staffWorkflow/apply\",method:\"post\",data:t})}function f(t){return Object(r.a)({url:\"/staffs/bindRole\",method:\"post\",data:t})}function d(){return Object(r.a)({url:\"/personnelApprover\",method:\"get\"})}function l(){return Object(r.a)({url:\"/department\",method:\"get\"})}function p(t){return Object(r.a)({url:\"/staff/limit\",method:\"get\",params:t})}function m(){return Object(r.a)({url:\"/staffs/personal/info\",method:\"get\"})}function h(t){return Object(r.a)({url:\"/staffs/\"+t+\"/info\",method:\"get\"})}function b(t){return Object(r.a)({url:\"staffs/personal/baseInfo\",method:\"patch\",data:t})}function g(t){return Object(r.a)({url:\"staffs/personal/eduInfo\",method:\"post\",data:t})}function v(t){return Object(r.a)({url:\"staffs/personal/eduInfo\",method:\"patch\",data:t})}function O(t){return Object(r.a)({url:\"staffs/personal/eduInfo/\"+t,method:\"delete\"})}var j=\"staffs/personal/workRecord\";function N(t){return Object(r.a)({url:j,method:\"post\",data:t})}function w(t){return Object(r.a)({url:j,method:\"patch\",data:t})}function $(t){return Object(r.a)({url:j+\"/\"+t,method:\"delete\"})}var _=\"staffs/personal/trainRecord\";function k(t){return Object(r.a)({url:_,method:\"post\",data:t})}function x(t){return Object(r.a)({url:_,method:\"patch\",data:t})}function y(t){return Object(r.a)({url:_+\"/\"+t,method:\"delete\"})}function C(t){return Object(r.a)({url:\"/staffWorkflow/applicant\",method:\"get\",params:t})}},ud4a:function(t,e,n){\"use strict\";var r=n(\"G8zN\");n.n(r).a}}]);","extractedComments":[]}