{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-7876\"],{DTy8:function(t,e,n){},KVMX:function(t,e,n){\"use strict\";n.r(e);var o=n(\"tOpQ\"),a=n(\"zF5t\"),i=n(\"bm9Z\"),r={name:\"roleMng\",components:{Pagination:n(\"Mz3J\").a},data:function(){return{title:\"用户管理\",buttonPrivilage:\"新增\",adminList:[],dialogFormVisible:!1,adminForm:{empNo:\"\",empName:\"\",deptNo:\"\",positionNo:\"\"},ruleForm:{empNo:[{required:!0,message:\"工号不能为空\",trigger:\"blur\"}],empName:[{required:!0,message:\"姓名不能为空\",trigger:\"blur\"}],deptNo:[{required:!0,message:\"部门不能为空\",trigger:\"change\"}],positionNo:[{required:!0,message:\"职位不能为空\",trigger:\"change\"}]},formLabelWidth:\"100px\",formDialogWidth:\"550px\",searchText:\"\",count:10,dialogConfigRole:!1,role:{list:[],name:\"\",adminId:\"\"},listQuery:{page:1,limit:20,importance:void 0,title:void 0,type:void 0,sort:\"+id\"},total:0,listLoading:!0,tableData:null,department:[],position:[]}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,Object(o.s)(this.listQuery).then(function(e){t.adminList=e.data.data.list,t.total=e.data.data.total})},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},addAdmin:function(){var t=this;Object(o.m)().then(function(e){t.department=e.data.data}),Object(i.b)().then(function(e){t.position=e.data.data}),this.dialogFormVisible=!0},cancel:function(){this.dialogFormVisible=!1,this.$refs.adminForm.resetFields(),this.$message({message:\"取消添加权限\",type:\"info\"})},addUser:function(){this.$refs.adminForm.resetFields()},submit:function(t){var e=this;this.$refs.adminForm.validate(function(n){n&&Object(o.h)(t).then(function(t){200==t.data.code?(e.dialogFormVisible=!1,e.$refs.adminForm.resetFields(),e.$message({message:\"用户添加成功\",type:\"success\"}),e.getList()):(e.$refs.adminForm.resetFields(),e.$message({message:\"用户添加失败，请重新添加\",type:\"error\"}))})})},handleConfig:function(t,e){var n=this;this.dialogConfigRole=!0,this.role.adminId=e.empNo,Object(a.f)().then(function(t){n.role.list=t.data.data.list}),Object(a.e)(e.empNo).then(function(t){var e=[];(null==t.data.data.list?\"\":t.data.data.list).forEach(function(t){e.push(t.roleNo)}),n.role.name=e})},configRoleCancel:function(){this.dialogConfigRole=!1},configRoleSubmit:function(t){var e=this,n={empNo:this.role.adminId,roleNoArr:t.name};Object(o.c)(n).then(function(t){200==t.data.code&&(e.dialogConfigRole=!1,e.$message({message:\"修改角色成功\",type:\"success\"}))})}}},l=(n(\"yWYG\"),n(\"KHd+\")),u=Object(l.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"roleMng\"},[n(\"div\",{staticClass:\"content\"},[n(\"div\",{staticClass:\"header\"},[n(\"el-row\",[n(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-plus\"},on:{click:t.addAdmin}},[t._v(t._s(t.buttonPrivilage))])],1)],1),t._v(\" \"),n(\"div\",{staticClass:\"main\"},[n(\"el-table\",{ref:\"multipleTable\",attrs:{data:t.adminList,\"tooltip-effect\":\"dark\"}},[n(\"el-table-column\",{attrs:{prop:\"empNo\",label:\"工号\",width:\"120\"}}),t._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"empName\",label:\"姓名\",width:\"150\"}}),t._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"deptName\",label:\"部门\",width:\"150\"}}),t._v(\" \"),n(\"el-table-column\",{attrs:{prop:\"positionName\",label:\"职位\",width:\"200\"}}),t._v(\" \"),n(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[n(\"el-button\",{attrs:{size:\"mini\",icon:\"el-icon-setting\",type:\"primary\"},on:{click:function(n){t.handleConfig(e.$index,e.row)}}},[t._v(\"配置角色\")])]}}])})],1)],1),t._v(\" \"),n(\"div\",{staticClass:\"footer\"},[n(\"pagination\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.total,expression:\"total\"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{\"update:page\":function(e){t.$set(t.listQuery,\"page\",e)},\"update:limit\":function(e){t.$set(t.listQuery,\"limit\",e)},pagination:t.getList}})],1)]),t._v(\" \"),n(\"el-dialog\",{attrs:{title:\"配置角色\",width:t.formDialogWidth,visible:t.dialogConfigRole},on:{\"update:visible\":function(e){t.dialogConfigRole=e}}},[n(\"el-form\",{ref:\"role\",attrs:{model:t.role}},[n(\"input\",{attrs:{type:\"hidden\",name:t.role.adminId}}),t._v(\" \"),n(\"el-form-item\",{attrs:{label:\"角色名称\"}},[n(\"el-checkbox-group\",{model:{value:t.role.name,callback:function(e){t.$set(t.role,\"name\",e)},expression:\"role.name\"}},t._l(t.role.list,function(e){return n(\"el-checkbox\",{key:e.roleNo,staticStyle:{display:\"block\"},attrs:{label:e.roleNo,name:\"type\"}},[t._v(t._s(e.roleName))])}))],1)],1),t._v(\" \"),n(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[n(\"el-button\",{attrs:{plain:!0},on:{click:t.configRoleCancel}},[t._v(\"取 消\")]),t._v(\" \"),n(\"el-button\",{attrs:{plain:!0,type:\"primary\"},on:{click:function(e){t.configRoleSubmit(t.role)}}},[t._v(\"确 定\")])],1)],1),t._v(\" \"),n(\"el-dialog\",{attrs:{title:\"添加用户\",width:t.formDialogWidth,visible:t.dialogFormVisible},on:{close:t.addUser,\"update:visible\":function(e){t.dialogFormVisible=e}}},[n(\"el-form\",{ref:\"adminForm\",attrs:{model:t.adminForm,rules:t.ruleForm}},[n(\"el-form-item\",{attrs:{label:\"工号\",\"label-width\":t.formLabelWidth,prop:\"empNo\"}},[n(\"el-input\",{attrs:{width:\"300px\",placeholder:\"请输入工号\"},model:{value:t.adminForm.empNo,callback:function(e){t.$set(t.adminForm,\"empNo\",e)},expression:\"adminForm.empNo\"}})],1),t._v(\" \"),n(\"el-form-item\",{attrs:{label:\"姓名\",\"label-width\":t.formLabelWidth,prop:\"empName\"}},[n(\"el-input\",{attrs:{width:\"300px\",placeholder:\"请输入姓名\"},model:{value:t.adminForm.empName,callback:function(e){t.$set(t.adminForm,\"empName\",e)},expression:\"adminForm.empName\"}})],1),t._v(\" \"),n(\"el-form-item\",{attrs:{label:\"部门\",\"label-width\":t.formLabelWidth,prop:\"deptNo\"}},[n(\"el-select\",{attrs:{clearable:\"\",placeholder:\"请选择\"},model:{value:t.adminForm.deptNo,callback:function(e){t.$set(t.adminForm,\"deptNo\",e)},expression:\"adminForm.deptNo\"}},t._l(t.department,function(t){return n(\"el-option\",{key:t.deptNo,attrs:{label:t.deptName,value:t.deptNo}})}))],1),t._v(\" \"),n(\"el-form-item\",{attrs:{label:\"职位\",\"label-width\":t.formLabelWidth,prop:\"positionNo\"}},[n(\"el-select\",{attrs:{clearable:\"\",placeholder:\"请选择\"},model:{value:t.adminForm.positionNo,callback:function(e){t.$set(t.adminForm,\"positionNo\",e)},expression:\"adminForm.positionNo\"}},t._l(t.position,function(t){return n(\"el-option\",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(\" \"),n(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[n(\"el-button\",{attrs:{plain:!0},on:{click:t.cancel}},[t._v(\"取 消\")]),t._v(\" \"),n(\"el-button\",{attrs:{plain:!0,type:\"primary\"},on:{click:function(e){t.submit(t.adminForm)}}},[t._v(\"确 定\")])],1)],1)],1)},[],!1,null,\"5659c7b1\",null);u.options.__file=\"index.vue\";e.default=u.exports},Lcw6:function(t,e,n){\"use strict\";var o=n(\"qULk\");n.n(o).a},Mz3J:function(t,e,n){\"use strict\";Math.easeInOutQuad=function(t,e,n,o){return(t/=o/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e};var o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function a(t,e,n){var a=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,i=t-a,r=0;e=void 0===e?500:e;!function t(){r+=20,function(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}(Math.easeInOutQuad(r,a,i,e)),r<e?o(t):n&&\"function\"==typeof n&&n()}()}var i={name:\"Pagination\",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:\"total, sizes, prev, pager, next, jumper\"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit(\"update:page\",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit(\"update:limit\",t)}}},methods:{handleSizeChange:function(t){this.$emit(\"pagination\",{page:this.currentPage,limit:t}),this.autoScroll&&a(0,800)},handleCurrentChange:function(t){this.$emit(\"pagination\",{page:t,limit:this.pageSize}),this.autoScroll&&a(0,800)}}},r=(n(\"Lcw6\"),n(\"KHd+\")),l=Object(r.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticClass:\"pagination-container\",class:{hidden:t.hidden}},[n(\"el-pagination\",t._b({attrs:{background:t.background,\"current-page\":t.currentPage,\"page-size\":t.pageSize,layout:t.layout,\"page-sizes\":t.pageSizes,total:t.total},on:{\"update:currentPage\":function(e){t.currentPage=e},\"update:pageSize\":function(e){t.pageSize=e},\"size-change\":t.handleSizeChange,\"current-change\":t.handleCurrentChange}},\"el-pagination\",t.$attrs,!1))],1)},[],!1,null,\"331ed7d4\",null);l.options.__file=\"index.vue\";e.a=l.exports},bm9Z:function(t,e,n){\"use strict\";n.d(e,\"c\",function(){return a}),n.d(e,\"b\",function(){return i}),n.d(e,\"a\",function(){return r});var o=n(\"t3Un\");function a(t){return Object(o.a)({url:\"/position/pagination\",method:\"get\",params:t})}function i(t){return Object(o.a)({url:\"/position\",method:\"get\",params:t})}function r(t){return Object(o.a)({url:\"/position\",method:\"post\",data:t})}},qULk:function(t,e,n){},tOpQ:function(t,e,n){\"use strict\";n.d(e,\"l\",function(){return a}),n.d(e,\"s\",function(){return i}),n.d(e,\"h\",function(){return r}),n.d(e,\"b\",function(){return l}),n.d(e,\"r\",function(){return u}),n.d(e,\"f\",function(){return s}),n.d(e,\"c\",function(){return c}),n.d(e,\"p\",function(){return d}),n.d(e,\"m\",function(){return m}),n.d(e,\"n\",function(){return f}),n.d(e,\"o\",function(){return p}),n.d(e,\"q\",function(){return h}),n.d(e,\"u\",function(){return g}),n.d(e,\"a\",function(){return b}),n.d(e,\"t\",function(){return v}),n.d(e,\"i\",function(){return y}),n.d(e,\"e\",function(){return O}),n.d(e,\"w\",function(){return j}),n.d(e,\"k\",function(){return w}),n.d(e,\"d\",function(){return _}),n.d(e,\"v\",function(){return k}),n.d(e,\"j\",function(){return $}),n.d(e,\"g\",function(){return C});var o=n(\"t3Un\");function a(t){return Object(o.a)({url:\"/staffs\",method:\"get\",params:t})}function i(t){return Object(o.a)({url:\"/staff/initialInfo\",method:\"get\",params:t})}function r(t){return Object(o.a)({url:\"/staff/initialInfo\",method:\"post\",data:t})}function l(t){return Object(o.a)({url:\"/staff/generalInfo\",method:\"patch\",data:t})}function u(){return Object(o.a)({url:\"/staffInfoItem\",method:\"get\"})}function s(t){return Object(o.a)({url:\"/staffWorkflow/apply\",method:\"post\",data:t})}function c(t){return Object(o.a)({url:\"/staffs/bindRole\",method:\"post\",data:t})}function d(){return Object(o.a)({url:\"/personnelApprover\",method:\"get\"})}function m(){return Object(o.a)({url:\"/department\",method:\"get\"})}function f(t){return Object(o.a)({url:\"/staff/limit\",method:\"get\",params:t})}function p(){return Object(o.a)({url:\"/staffs/personal/info\",method:\"get\"})}function h(t){return Object(o.a)({url:\"/staffs/\"+t+\"/info\",method:\"get\"})}function g(t){return Object(o.a)({url:\"staffs/personal/baseInfo\",method:\"patch\",data:t})}function b(t){return Object(o.a)({url:\"staffs/personal/eduInfo\",method:\"post\",data:t})}function v(t){return Object(o.a)({url:\"staffs/personal/eduInfo\",method:\"patch\",data:t})}function y(t){return Object(o.a)({url:\"staffs/personal/eduInfo/\"+t,method:\"delete\"})}var N=\"staffs/personal/workRecord\";function O(t){return Object(o.a)({url:N,method:\"post\",data:t})}function j(t){return Object(o.a)({url:N,method:\"patch\",data:t})}function w(t){return Object(o.a)({url:N+\"/\"+t,method:\"delete\"})}var F=\"staffs/personal/trainRecord\";function _(t){return Object(o.a)({url:F,method:\"post\",data:t})}function k(t){return Object(o.a)({url:F,method:\"patch\",data:t})}function $(t){return Object(o.a)({url:F+\"/\"+t,method:\"delete\"})}function C(t){return Object(o.a)({url:\"/staffWorkflow/applicant\",method:\"get\",params:t})}},yWYG:function(t,e,n){\"use strict\";var o=n(\"DTy8\");n.n(o).a},zF5t:function(t,e,n){\"use strict\";n.d(e,\"f\",function(){return a}),n.d(e,\"b\",function(){return i}),n.d(e,\"a\",function(){return r}),n.d(e,\"d\",function(){return l}),n.d(e,\"c\",function(){return u}),n.d(e,\"e\",function(){return s});var o=n(\"t3Un\");function a(t){return Object(o.a)({url:\"/role\",method:\"get\",params:t})}function i(t){return Object(o.a)({url:\"/role/bindPermission\",method:\"post\",data:t})}function r(t){return Object(o.a)({url:\"/role\",method:\"post\",data:t})}function l(t){return Object(o.a)({url:\"/role\",method:\"patch\",data:t})}function u(t){return Object(o.a)({url:\"/role/\"+t,method:\"delete\"})}function s(t){return Object(o.a)({url:\"/role/empNo?empNo=\"+t,method:\"get\"})}}}]);","extractedComments":[]}